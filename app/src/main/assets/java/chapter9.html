<!DOCTYPE html>
<html>
<head>
    <title>第十章 构造器 - 邠心工作室</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <link href="css/main.css" rel="stylesheet" />
    <script src="Script/shCore.js" type="text/javascript"></script>
    <script src="Script/shBrushJava.js" type="text/javascript"></script>
    <link href="css/shCoreDefault.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
</head>
<body>
    <div class="div">
        <blockquote>
            构造器在前面的章节里的代码，同学们已经看到很多次了。通过用new关键字来调用构造器使其对象在内存中创建出来。下面将要详细的介绍构造器的一些知识。通过本章的学习，同学们应该能够完成如下几个目标。
            <ol>
                <li>了解什么是构造器。</li>
                <li>熟练掌握如何创建构造器。</li>
                <li>熟练掌握构造器的使用，包括构造器如何调用等问题。</li>
                <li>了解构造器的一些基本机制。</li>
            </ol>
        </blockquote>
        <h3>10.1  什么是构造器</h3>
        <p>在日常生活中，盖房子需要工具和工人，通过工人使用这些工具，来修建一个房子。在Java中，构造器就好比是工具，而new关键字就是工人，通过new关键字和构造器结合来创建对象。</p>
        <h4>10.1.1  构造器的使用</h4>
        <p>要建立对象就要使用new关键字来建立对象，这是建立对象唯一的方法。下面介绍构造器的语法组成。</p>
        <pre class="brush:java">类的修饰符 类的名称(参数列表)
{
    //方法体
}
</pre>
        <ul>
            <li>构造器可以使用的修饰符有public、protected、default、private，不写即为default类型的。</li>
            <li>构造器的名称必须要和类的名称相同。</li>
            <li>不能有返回值，void也不行。</li>
            <li>构造器的参数可有可无。有一个也可有多个参数。</li>
        </ul>
        <h4>10.1.2  被修饰的构造器</h4>
        <p>构造器是可以被修饰符修饰的，不同的修饰符修饰构造器也具有不同的效果，本小节通过使用不同的修饰符来进行代码演示。</p>
        <pre class="brush:java">public class Test1
{
    int a,b;
    
    private Test1()
    {
    }
    public Test1(int a)
    {
        this(a, 0);
    }
    
    protected Test1(int a, int b)
    {
        this.a = a;
        this.b = b;
    }
}</pre>
        <h4>10.1.3  构造器方法与普通方法的区别</h4>
        <p>构造器方法和普通的方法是有一定区别，主要是功能上、修饰符上、返回值上和命名上有本质的区别。区别如下：</p>
        <ul>
            <li>构造器是为了创建一个类的对象实例，也可以在创建对象的时候使用。</li>
            <li>方法是为了执行相应的方法体。即Java代码。</li>
            <li>构造器可以被修饰为public、protected、default、private类型，但不能修饰为abstract、final、native、static、synchronized。</li>
            <li>方法可以修饰为除了protected、native外的修饰符。</li>
            <li>构造器没有返回值也没有void。</li>
            <li>方法没有返回值或有任何类型的返回值。</li>
            <li>构造器的名称要和类的名称相同。</li>
            <li>方法的名称可以任意起，但要注意标识符的命名规则。使其更具有意义。</li>
        </ul>
        <h3>10.2  如何实例化一个对象</h3>
        <p>所谓实例化就是在内存中实实在在的创建一个对象，在日常生活中就好比创造了一个东西出来。而在Java中，实例化一个对象用new关键字来完成。下面先介绍new关键字的语法以及通过一个例子来演示。</p>
        <pre class="brush:java">new 构造器的名称(参数列表)</pre>
        <p>
            new为Java关键字要注意大小写。<br />
            构造器的名称要和类的名称相同。<br />
            通过调用构造器方法来对这个对象进行一些必要的初始化。<br />
            用new关键字实例化对象后返回该对象的引用。
        </p>
        <h3>10.3  构造器的使用</h3>
        <p>通过前面的介绍，同学们已经对构造器有了基本的了解。但是使用构造器也是有一些注意事项的。在本节里介绍构造器在父子类中是如何使用的。</p>
        <h4>10.3.1  构造器的调用</h4>
        <p>构造器的调用一般有两种情况，一般是在本类里调用或在同包下的另一个类调用，另一种情况是子类调用父类的构造器的。下面通过代码来分别演示。</p>
        <pre class="brush:java">public class Test2
{
    int a,b;
    
    private Test2()
    {
    }
    public Test2(int a)
    {
        this(a, 0); //调用自身的构造器
    }
    
    protected Test2(int a, int b)
    {
        this.a = a;
        this.b = b;
    }
}
public class Test3
{
    Test2 t2 = new Test2(1); //同包下的另一个类调用
}
public class Test4 extends Test2
{
    public Test4()
    {
        super(1, 2); //子类调用父类的构造器
    }
}</pre>
        <h4>10.3.2  构造器的重载</h4>
        <p>所谓构造器的重载和方法的重载是一样的，重载就好比日常生活中人的名字，有大名有小名，但这些名字都指的是这个人，不同点就是让这个人去做的事情可能不一样。这个和Java里的方法的重载很相似。下面来看一下重载的要求。</p>
        <ul>
            <li>构造器的重载的方法名称相同，但参数列表不相同。如：参数个数和参数类型等。</li>
            <li>构造器的重载的方法是没有返回值的。</li>
            <li>构造器不能被继承，这和方法有所区别。</li>
            <li>构造器的修饰符只有public、private、protected这三个。</li>
        </ul>
        <h4>10.3.3  父子类间的构造器的调用流程</h4>
        <p>
            在前面学习过用new关键字来创建一个对象，但在继承关系发生时，父类与子类是如何创建对象的呢。它们的顺序又是什么样的呢。<br />
            详细的步骤如下所述。
        </p>
        <p>
            在用new关键字创建对象aceing的时候。执行new aceing()会进入到aceing对象的构造器方法体内。<br />
            因为继承的关系，会默认调用方法super进入到父类bike对象的构造器方法体内。<br />
            对父类bike对象进行初始化。父类的构造器方法执行完毕后回到子类的构造器继续执行。<br />
            执行子类的构造器方法，并初始化数据。
        </p>
        <h4>10.3.4  如何自定义构造器</h4>
        <p>自定义的构造器已在前面的代码中多次使用。所谓自定义构造器就是不显式的定义构造器，编译器就是自动地生成一个无参的构造器，但是一旦显式的定义了一个构造器的话，编译器就不会自动生成了。下面用代码演示如何自定义构造器。</p>
        <pre class="brush:java">public class Test5
{
    //定义一个无参的构造器
    public Test5()
    {
        //该构造器的方法体
    }	
    //具有两个参数的构造器
    public Test5(String i, int n)
    {
        //该构造器的方法体
    }
}</pre>
        <h3>10.4  什么是单子模式</h3>
        <p>单子模式是Java模式工厂里的一种，所谓单子模式，就是在一个时间段内对象只存在一份。下面通过代码来演示什么是单子模式。单子模式就是把构造器修饰为private类型的，用一个public类型的方法返回该对象的引用。</p>
        <h3>10.5  构造器在程序中是何时运行的</h3>
        <p>前面的章节里介绍了构造器是为了创建对象并对其对象的成员变量进行初始化等操作，那么在构造器运行前系统执行什么呢，之后又执行什么呢。下面总结一下。</p>
        <ul>
            <li>加载要创建该对象的父类，以及成员变量和其他继承关系。</li>
            <li>加载该类的静态块和静态成员变量，并对其进行初始化等操作。</li>
            <li>静态块和静态成员变量加载完毕后创建对象并加载非静态成员变量，并对其进行初始化等操作。</li>
            <li>执行构造器里的方法体，完成后该类的对象创建完毕。</li>
            <li>父类的运行顺序和该类的顺序是一样的。</li>
        </ul>
        <h3>10.6  综合练习</h3>
        <span>1.看下面的程序有什么错误。</span>
        <pre class="brush:java">public class LianXi1
{
	public LianXi1()
	{
		System.out.println("调用无参构造器");
		new LianXi1("hello");
	}
	public LianXi1(String s)
	{
		System.out.println("调用有参构造器");
		new LianXi1();
	}
	public static void main(String args[])
	{
		new LianXi1();
	}
}</pre>
        <span>2.编写一个构造器重载的程序，在每一个构造器中显示一条语句。</span>
        <p class="exap">【提示】可以采用构造器间调用。</p>
        <pre class="brush:java">public class LianXi2
{
	public LianXi2()
	{
		new LianXi2("A"); //调用具有一个参数的构造器
	}
	public LianXi2(String s)
	{
		System.out.println("参数值为："+s);
		new LianXi2("B","C"); //调用具有两个参数的构造器
	}
	public LianXi2(String s,String ss)
	{
		System.out.println("第一个参数值为："+s+"，第二个参数值为："+ss);
		new LianXi2("D","E","F"); //调用具有三个参数的构造器
	}
	public LianXi2(String s,String ss,String sss)
	{
		System.out.println("参数包括："+s+","+ss+","+sss);
	}
	public static void main(String args[])
	{
		new LianXi2(); //调用无参构造器
	}
}</pre>
        <h3>10.7  小结</h3>
        <p>本章介绍了构造器的知识，以及它的使用和注意事项。了解构造器方法的执行顺序对了解程序的执行有很好的帮助。希望同学们重点了解构造器的使用这个小节里的内容。如果想了解更多的关于本章的内容，可以参考电子工业出版社出版的<b>《深入浅出JDK 6.0》</b>一书进行学习。</p>
    </div>
</body>
</html>
